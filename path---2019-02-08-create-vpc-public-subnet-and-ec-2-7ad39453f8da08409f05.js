webpackJsonp([0xd512ac3ddf1b],{530:function(e,n){e.exports={data:{site:{siteMetadata:{title:"Toshio Blog",author:"Ta Toshio"}},markdownRemark:{id:"/Volumes/Transcend/Workspace/local/ta-toshio-blog/src/pages/2019-02-08-create-vpc-public-subnet-and-ec-2/index.md absPath of file >>> MarkdownRemark",html:'<p>理解を深めるための備忘録です。\nこちらの講座をもとに作業しました。詳しい解説はそちらを閲覧してください。（有料です）</p>\n<p><a href="https://www.udemy.com/aws-14days/">https://www.udemy.com/aws-14days/</a></p>\n<h3>VPCをつくる</h3>\n<p>独立したネットワークを構築するができるもの。</p>\n<h3>サブネット</h3>\n<p>IPレンジを利用したネットワーク帯域。</p>\n<p>サブネットにはルートテーブルというものを持っている。ルートテーブルには、通信の経路を設定できる。</p>\n<h3>パブリックサブネット</h3>\n<p>Internet Gatewayというサービスを利用して、VPCの外から入ってくることも、外へ出ることも許可する。</p>\n<p>外から入るものに関しては、入って良いものを定義してあげる。</p>\n<h3>プライベートサブネット</h3>\n<p>基本、VPC内の通信のみしか許可しない。外へ出ることを許可するためにはNAT Gatewayというサービスを利用する。</p>\n<h3>目的のネットワーク</h3>\n<p>インターネットゲートウェイ\nアベイラビリティゾーン1aと1cにパブリックサブネット</p>\n<ul>\n<li>アベイラビリティゾーン1aにEC2</li>\n<li>Nat GW\nアベイラビリティゾーン1aと1cにプライベートサブネット</li>\n<li>アベイラビリティゾーン1aにEC2</li>\n</ul>\n<h3>パブリックサブネットをつくる</h3>\n<h4>方針</h4>\n<ol>\n<li>VPCを作成する</li>\n<li>アベイラビリティゾーン1aにパブリックサブネットを作成する</li>\n<li>Internet GWも作成する</li>\n</ol>\n<p>別のアベイラビリティゾーン（1c）にも場ブリックサブネットを作成する</p>\n<ol start="4">\n<li>アベイラビリティゾーン1cにパブリックサブネットを作成する</li>\n<li>新規で作った場合はInternet GWに向いていないので、ルートテーブルを修正する</li>\n</ol>\n<h4>作業</h4>\n<p>ウィザード\n<img src="https://user-images.githubusercontent.com/37950257/52530667-1aafbd00-2d4c-11e9-8d7f-e1b799e4190a.png"></p>\n<p>入力内容\n<img src="https://user-images.githubusercontent.com/37950257/52530668-1aafbd00-2d4c-11e9-9817-7caf98d76677.png"></p>\n<p>作成されたVPC確認\n<img src="https://user-images.githubusercontent.com/37950257/52530670-1b485380-2d4c-11e9-895a-331b79c89b48.png"></p>\n<p>作成されたサブネット確認\n<img src="https://user-images.githubusercontent.com/37950257/52530671-1b485380-2d4c-11e9-8259-a0962bcef880.png"></p>\n<p>作成されたインターネットゲートウェイ確認\nあと名前をつけた\n<img src="https://user-images.githubusercontent.com/37950257/52530672-1be0ea00-2d4c-11e9-9b08-f558d7f3d4f2.png"></p>\n<p>作成されたルートテーブル確認\nあとな名前をつけた\n<img src="https://user-images.githubusercontent.com/37950257/52530673-1be0ea00-2d4c-11e9-8ecf-36df1fb6f764.png"></p>\n<p>ルートテーブル設定内容の確認\n<img src="https://user-images.githubusercontent.com/37950257/52530674-1be0ea00-2d4c-11e9-88ba-16885ea4351e.png"></p>\n<p>Destination: 10.0.0.0/16, Target: Local\n<br />\nDestination: 0.0.0.0/0, Target: igw-xxx\n<br />\nVPC中の接続は、そのままLocalの接続。その他はインターネットゲートウェイに出ていくように、という内容</p>\n<p>アベイラビリティゾーン1cにもパブリックサブネットを作成する</p>\n<p>新規にサブネットの作成\n<img src="https://user-images.githubusercontent.com/37950257/52530850-5dbf5f80-2d4f-11e9-8c6a-3c240a42450d.png"></p>\n<p>注意点はVPCの選択は上で作成したVPC</p>\n<p>作成されたアベイラビリティゾーン1cのサブネット\n<img src="https://user-images.githubusercontent.com/37950257/52530851-5dbf5f80-2d4f-11e9-94f0-1c075107f2fb.png"></p>\n<p>ただ先程作成したアベイラビリティゾーン1aのサブネットと違うところは、インターネットゲートウェイの項目が存在しない</p>\n<p><img src="https://user-images.githubusercontent.com/37950257/52530852-5dbf5f80-2d4f-11e9-91cd-fbff75f6c8b3.png"></p>\n<p>インターネットゲートウェイの設定を追加するために「ルートテーブルの関連付けの編集」ボタンを押下する</p>\n<p>入力画面\n<img src="https://user-images.githubusercontent.com/37950257/52530853-5e57f600-2d4f-11e9-90f9-c996a4867845.png"></p>\n<p>ルートテーブルIDに1aのサブネットした時に作成されたインターネットゲートウェイを選択。</p>\n<p>（名前がmy-rtb-for-subnet-1aとしたが、1cでも同じルートテーブルを使うのであれば、my-rtb-for-public-subnetという名前のほうがよさそう。あとで変更する）</p>\n<p>選択後、igw-xxxの行が追加された\n<img src="https://user-images.githubusercontent.com/37950257/52530854-5e57f600-2d4f-11e9-9904-af469c8d540a.png"></p>\n<p>編集されたルートテーブルの設定を確認。インターネットゲートウェイの項目が追加されていること確認。</p>\n<p><a href="https://user-images.githubusercontent.com/37950257/52531195-02906b80-2d55-11e9-9005-ad982e44f84a.png">https://user-images.githubusercontent.com/37950257/52531195-02906b80-2d55-11e9-9005-ad982e44f84a.png</a></p>\n<h3>パブリックサブネットの1aにEC2をつくる</h3>\n<p>方針</p>\n<ol>\n<li>EC2をつくる</li>\n<li>VPCやサブネットを指定する</li>\n</ol>\n<p>作業</p>\n<p>Amazon Linux 2 AMI (HVM), SSD Volume Typeを選択</p>\n<p><img src="https://user-images.githubusercontent.com/37950257/52531197-03290200-2d55-11e9-9b97-e219c295af77.png"></p>\n<p>お好きなインスタイプを選択</p>\n<p>入力画面</p>\n<p>ネットワークに上で作成したVPCを選択\n<img src="https://user-images.githubusercontent.com/37950257/52531198-03290200-2d55-11e9-8e4a-5a792dd38ad9.png"></p>\n<p>サブネットに1aのサブネットを選択\n<img src="https://user-images.githubusercontent.com/37950257/52531199-03290200-2d55-11e9-8c1b-0b7d6df9553e.png"></p>\n<p>パブリックIPの割当に「有効」を選択</p>\n<p>他はそのまま進んで、</p>\n<p>タグを設定\n<img src="https://user-images.githubusercontent.com/37950257/52531200-03290200-2d55-11e9-90c8-14099b22f610.png"></p>\n<p>セキュリティーグループを設定（追加）</p>\n<p><img src="https://user-images.githubusercontent.com/37950257/52531201-03c19880-2d55-11e9-9b2c-47bf7de052ce.png"></p>\n<p>そのまま進んで、「起動」ボタンを押下、sshの鍵認証を選択して、インスタンスの作成。</p>\n<p>作成されたことを確認</p>\n<p><img src="https://user-images.githubusercontent.com/37950257/52531398-2d2ff380-2d58-11e9-97dd-f176f6e7c48d.png"></p>\n<p>IPv4パブリックIPより、sshでログインできることを確認</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">$ ssh -i ~/.ssh/aws_cypher_works/xxx/aws-toshio.pem ec2-user@xxx.xxx.xxx.xxx\n~~\n       __|  __|_  )\n       _|  (     /   Amazon Linux 2 AMI\n      ___|\\___|___|\n\nhttps://aws.amazon.com/amazon-linux-2/\n3 package(s) needed for security, out of 3 available\nRun &quot;sudo yum update&quot; to apply all updates.\n[ec2-user@my-web-1a ~]$</code></pre>\n      </div>\n<p>外に通信が出られるか確認</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">[ec2-user@my-web-1a ~]$ ping yahoo.co.jp\n~~\n^C\n--- yahoo.co.jp ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms</code></pre>\n      </div>\n<p>続きます、以上です。</p>',frontmatter:{title:"Create Vpc Public Subnet And Ec 2",date:"February 08, 2019"}}},pathContext:{slug:"/2019-02-08-create-vpc-public-subnet-and-ec-2/",previous:{fields:{slug:"/2018-09-28-formik-material-ui-checkbox/"},frontmatter:{title:"formik-material-uiでのCheckboxの初期値"}},next:{fields:{slug:"/2019-02-09-create-vpc-private-subnet-and-ec-2/"},frontmatter:{title:"Create Vpc Private Subnet And Ec 2"}}}}}});
//# sourceMappingURL=path---2019-02-08-create-vpc-public-subnet-and-ec-2-7ad39453f8da08409f05.js.map